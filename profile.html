<!doctype html>
<html lang="en">
  <head>
    <title>Title</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  </head>
  <body onlooad="readUser()">
    <!-- The core Firebase JS SDK is always required and must be listed first -->

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->


      
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://www.gstatic.com/firebasejs/3.1.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/3.1.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/3.1.0/firebase-database.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <nav class="navbar navbar-light bg-light">
      <a class="nav-link" href="home.html">Back</a>
    </nav>
    <div>
    <form id="form" action="/action_page.php">
  <label for="fname">First name:</label><br>
  <input type="text" id="fname" name="fname" value="John"><br>
  <label for="lname">Last name:</label><br>
  <input type="text" id="lname" name="lname" value="Doe"><br><br>
  <input type="submit" value="Submit">
   </form> 
      </div>
    
    <div class="col-md-6" id="cardSection">
      </div>
    
    <script>
  // Your web app's Firebase configuration
  var firebaseConfig = {
    apiKey: "AIzaSyDxDmURZ1b--GsY8YQiBZmBH7NFWPcL6so",
    authDomain: "friendlychat-97cc4.firebaseapp.com",
    databaseURL: "https://friendlychat-97cc4.firebaseio.com",
    projectId: "friendlychat-97cc4",
    storageBucket: "friendlychat-97cc4.appspot.com",
    messagingSenderId: "456348780716",
    appId: "1:456348780716:web:3d719c72ad7c5c658bb709"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  
  var d=new Date();
  var t=d.getTime();
  var counter=t;
   
      document.getElementById("form").addEventListener("submit",(e)=>{
      var fname=document.getElementById("fname").value;
        var lname=document.getElementById("lname").value;
        e.preventDefault();
        createUser(fname,lname);
        form.reset();
      });
      
   function createUser(fname,lname){
   counter+=1;
   var user={
   fname: fname,
     id:counter,
     lname: lname
   }
   
   let db=firebase.database().ref("/"+counter);
   db.set(user);
     
   document.getElementById("cardSection").innerHTML='';
     readUser();
   }
      
      
function readUser(){
  var user=firebase.database().ref("/");
  user.on("child_added",function(data){
  var userValue=data.val();
  console.log(userValue);
    
  document.getElementById("cardSection").innerHTML+=`
    <div class="card mb 3">
      <div class="card-body">
        <h5 class="card-title">${userValue.fname}</h5>
        <p class="card-text">${userValue.lname}</p>
    </div>
    </div>
    `
  });
};
</script>
    
    
    <div>
          <div class="card">
            <div class="card-header">
              <h4>Latest Goats</h4>
            </div>
            <table class="table table-striped">
              <thead class="thead-dark">
                <tr>
                  <th>Id</th>
                  <th>DOB</th>
                  <th>Sex</th>
                  <th>Amount</th>
                  <th>VDate</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>1</td>
                  <td>Jan 01 2020</td>
                  <td>Male</td>
                  <td>10000</td>
                  <td>Jan 01 2020</td>
                </tr>
                <tr>
                  <td>2</td>
                  <td>Jan 02 2020</td>
                  <td>Female</td>
                  <td>20000</td>
                  <td>Jan 02 2020</td>
                </tr>
                <tr>
                  <td>3</td>
                  <td>Jan 03 2020</td>
                  <td>Male</td>
                  <td>10000</td>
                  <td>Jan 03 2020</td>
                </tr>
                <tr>
                  <td>4</td>
                  <td>Jan 04 2020</td>
                  <td>Female</td>
                  <td>10000</td>
                  <td>Jan 04 2020</td>
                </tr>
                <tr>
                  <td>5</td>
                  <td>Jan 05 2020</td>
                  <td>Male</td>
                  <td>10000</td>
                  <td>Jan 05 2020</td>
                </tr>
                <tr>
                  <td>6</td>
                  <td>Jan 06 2020</td>
                  <td>Female</td>
                  <td>10000</td>
                  <td>Jan 06 2020</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
